{"remainingRequest":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/babel-loader/lib/index.js!/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuzhongliang/Documents/learnWebpack/mall/src/views/home/home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/src/views/home/home.vue","mtime":1599663128810},{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport navbar from 'components/common/navbar/NavBar';\nimport tabcontrol from 'components/common/tabControl/tabcontrol';\nimport scroll from 'components/common/BScroll/BScroll';\nimport backtop from 'components/common/backTop/backTop';\nimport homeSwiper from 'components/common/swiper/swiper';\nimport goodsView from 'components/common/goods/goodsView';\nimport recommend from 'views/home/childhome/recommend';\nimport feature from 'views/home/childhome/feature';\nimport { getHomeMultidata as _getHomeMultidata, getHomeGoods as _getHomeGoods } from '@/network/home';\nexport default {\n  data: function data() {\n    return {\n      isShow: false,\n      bannerList: [],\n      recommendList: [],\n      goods: {\n        'pop': {\n          page: 0,\n          list: []\n        },\n        'new': {\n          page: 0,\n          list: []\n        },\n        'sell': {\n          page: 0,\n          list: []\n        }\n      },\n      currentType: 'pop',\n      saveY: null,\n      showTab: false,\n      tabTop: 0,\n      newRefresh: null\n    };\n  },\n  components: {\n    navbar: navbar,\n    tabcontrol: tabcontrol,\n    scroll: scroll,\n    backtop: backtop,\n    homeSwiper: homeSwiper,\n    recommend: recommend,\n    feature: feature,\n    goodsView: goodsView\n  },\n  computed: {\n    showGoods: function showGoods() {\n      console.log(this.goods[this.currentType].list);\n      return this.goods[this.currentType].list;\n    }\n  },\n  created: function created() {\n    // 1.请求多个数据\n    this.getHomeMultidata(); // 2.请求商品数据\n\n    this.getHomeGoods('pop');\n    this.getHomeGoods('new');\n    this.getHomeGoods('sell');\n  },\n  mounted: function mounted() {\n    // 监听图片是否加载完成\n    var refresh = this.debounce(this.$refs.scroll.refresh);\n\n    this.newRefresh = function () {\n      refresh();\n    };\n\n    this.$bus.$on('imgLoad', this.newRefresh);\n  },\n  activated: function activated() {\n    this.$refs.scroll.scrollTo(0, this.saveY, 0);\n    this.$refs.scroll.refresh();\n  },\n  deactivated: function deactivated() {\n    this.$bus.$off('imgLoad', this.newRefresh);\n    this.saveY = this.$refs.scroll.getscrollY();\n  },\n  methods: {\n    // 置顶\n    backClick: function backClick() {\n      this.$refs.scroll.scrollTo(0, 0, 500);\n    },\n    backtopshow: function backtopshow(position) {\n      // 判断backtop是否显示\n      this.isShow = -position.y > 200; // 判断是否显示顶部tab,即形成吸顶效果\n\n      this.showTab = -position.y > this.tabTop;\n    },\n    getHomeMultidata: function getHomeMultidata() {\n      var _this = this;\n\n      _getHomeMultidata().then(function (res) {\n        _this.bannerList = res.data.banner.list;\n        _this.recommendList = res.data.recommend.list;\n        console.log(res);\n      });\n    },\n    getHomeGoods: function getHomeGoods(type) {\n      var _this2 = this;\n\n      var page = this.goods[type].page + 1;\n\n      _getHomeGoods(type, page).then(function (res) {\n        var _this2$goods$type$lis;\n\n        (_this2$goods$type$lis = _this2.goods[type].list).push.apply(_this2$goods$type$lis, _toConsumableArray(res.data.list));\n\n        _this2.goods[type].page += 1; // 完成上拉加载更多\n\n        _this2.$refs.scroll.finishPullUp();\n      });\n    },\n    tabclick: function tabclick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = 'pop';\n          break;\n\n        case 1:\n          this.currentType = 'new';\n          break;\n\n        case 2:\n          this.currentType = 'sell';\n          break;\n      }\n\n      this.$refs.tab.currentIndex = index;\n      this.$refs.tab1.currentIndex = index;\n      this.$refs.scroll.refresh();\n    },\n    debounce: function debounce(func, delay) {\n      var timer = null;\n      return function () {\n        var _this3 = this;\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (timer) clearTimeout(timer);\n        timer = setTimeout(function () {\n          func.apply(_this3, args);\n        }, delay);\n      };\n    },\n    loadMore: function loadMore() {\n      this.getHomeGoods(this.currentType);\n    },\n    swiperImgLoad: function swiperImgLoad() {\n      this.tabTop = this.$refs.tab.$el.offsetTop;\n      console.log(this.$refs.tab.$el.offsetTop);\n    }\n  }\n};",{"version":3,"sources":["home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <navbar>\n      <template #center>\n        <span>购物街</span>\n      </template>\n    </navbar>\n    <tabcontrol :tabList = '[\"新款\",\"热卖\",\"流行\"]' @tabclick=\"tabclick\" v-show='showTab' ref='tab1'></tabcontrol>\n    <div class=\"clear\"></div>\n    <keep-alive>\n      <scroll class=\"sc-content\" :probe-type='3' ref='scroll' @scroll='backtopshow' :pull-up-load='true' @pullingUp='loadMore'>\n        <home-swiper :swiperList= 'bannerList' @swiperImgLoad='swiperImgLoad'></home-swiper>\n        <recommend :recommendList= recommendList></recommend>\n        <feature></feature>\n        <tabcontrol :tabList = '[\"新款\",\"热卖\",\"流行\"]' @tabclick=\"tabclick\" ref='tab'></tabcontrol>\n        <goods-view :goods=\"showGoods\"></goods-view>\n      </scroll>\n    </keep-alive>\n    <backtop @back-click='backClick' v-show='isShow'></backtop>\n  </div>\n</template>\n\n<script>\nimport navbar from 'components/common/navbar/NavBar'\nimport tabcontrol from 'components/common/tabControl/tabcontrol'\nimport scroll from 'components/common/BScroll/BScroll'\nimport backtop from 'components/common/backTop/backTop'\nimport homeSwiper from 'components/common/swiper/swiper'\nimport goodsView from 'components/common/goods/goodsView'\nimport recommend from 'views/home/childhome/recommend'\nimport feature from 'views/home/childhome/feature'\nimport { getHomeMultidata, getHomeGoods } from '@/network/home'\nexport default {\n  data () {\n    return {\n      isShow: false,\n      bannerList: [],\n      recommendList: [],\n      goods: {\n        'pop': { page: 0, list: [] },\n        'new': { page: 0, list: [] },\n        'sell': { page: 0, list: [] }\n      },\n      currentType: 'pop',\n      saveY: null,\n      showTab: false,\n      tabTop: 0,\n      newRefresh: null\n    }\n  },\n  components: {\n    navbar,\n    tabcontrol,\n    scroll,\n    backtop,\n    homeSwiper,\n    recommend,\n    feature,\n    goodsView\n  },\n  computed: {\n    showGoods () {\n      console.log(this.goods[this.currentType].list)\n      return this.goods[this.currentType].list\n    }\n  },\n  created () {\n    // 1.请求多个数据\n    this.getHomeMultidata()\n\n    // 2.请求商品数据\n    this.getHomeGoods('pop')\n    this.getHomeGoods('new')\n    this.getHomeGoods('sell')\n  },\n  mounted () {\n    // 监听图片是否加载完成\n    const refresh = this.debounce(this.$refs.scroll.refresh)\n    this.newRefresh = () => { refresh() }\n    this.$bus.$on('imgLoad', this.newRefresh)\n  },\n  activated () {\n    this.$refs.scroll.scrollTo(0, this.saveY, 0)\n    this.$refs.scroll.refresh()\n  },\n  deactivated () {\n    this.$bus.$off('imgLoad', this.newRefresh)\n    this.saveY = this.$refs.scroll.getscrollY()\n  },\n  methods: {\n    // 置顶\n    backClick () {\n      this.$refs.scroll.scrollTo(0, 0, 500)\n    },\n    backtopshow (position) {\n      // 判断backtop是否显示\n      this.isShow = -(position.y) > 200\n      // 判断是否显示顶部tab,即形成吸顶效果\n      this.showTab = -(position.y) > this.tabTop\n    },\n    getHomeMultidata () {\n      getHomeMultidata().then(res => {\n        this.bannerList = res.data.banner.list\n        this.recommendList = res.data.recommend.list\n        console.log(res)\n      })\n    },\n    getHomeGoods (type) {\n      const page = this.goods[type].page + 1\n      getHomeGoods(type, page).then(res => {\n        this.goods[type].list.push(...res.data.list)\n        this.goods[type].page += 1\n        // 完成上拉加载更多\n        this.$refs.scroll.finishPullUp()\n      })\n    },\n    tabclick (index) {\n      switch (index) {\n        case 0:\n          this.currentType = 'pop'\n          break\n        case 1:\n          this.currentType = 'new'\n          break\n        case 2:\n          this.currentType = 'sell'\n          break\n      }\n      this.$refs.tab.currentIndex = index\n      this.$refs.tab1.currentIndex = index\n      this.$refs.scroll.refresh()\n    },\n    debounce (func, delay) {\n      let timer = null\n      return function (...args) {\n        if (timer) clearTimeout(timer)\n        timer = setTimeout(() => {\n          func.apply(this, args)\n        }, delay)\n      }\n    },\n    loadMore () {\n      this.getHomeGoods(this.currentType)\n    },\n    swiperImgLoad () {\n      this.tabTop = this.$refs.tab.$el.offsetTop\n      console.log(this.$refs.tab.$el.offsetTop)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.clear {\n  clear:both;\n  margin-top: 49px;\n}\n.sc-content {\n  height: calc(100vh - 120px);\n  overflow: hidden;\n}\n</style>\n"],"sourceRoot":"src/views/home"}]}