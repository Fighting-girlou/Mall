{"remainingRequest":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yuzhongliang/Documents/learnWebpack/mall/src/views/home/home.vue?vue&type=style&index=0&id=39f87be5&scoped=true&lang=css&","dependencies":[{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/src/views/home/home.vue","mtime":1599489550439},{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yuzhongliang/Documents/learnWebpack/mall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.clear {\n  clear:both;\n  margin-top: 49px;\n}\n.sc-content {\n  height: calc(100vh - 120px);\n  overflow: hidden;\n}\n",{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div>\n    <navbar>\n      <template #center>\n        <span>购物街</span>\n      </template>\n    </navbar>\n    <tabcontrol :tabList = '[\"新款\",\"热卖\",\"流行\"]' @tabclick=\"tabclick\" v-show='showTab' ref='tab1'></tabcontrol>\n    <div class=\"clear\"></div>\n    <keep-alive>\n      <scroll class=\"sc-content\" :probe-type='3' ref='scroll' @scroll='backtopshow' :pull-up-load='true' @pullingUp='loadMore'>\n        <home-swiper :swiperList= 'bannerList' @swiperImgLoad='swiperImgLoad'></home-swiper>\n        <recommend :recommendList= recommendList></recommend>\n        <feature></feature>\n        <tabcontrol :tabList = '[\"新款\",\"热卖\",\"流行\"]' @tabclick=\"tabclick\" ref='tab'></tabcontrol>\n        <goods-view :goods=\"showGoods\"></goods-view>\n      </scroll>\n    </keep-alive>\n    <backtop @back-click='backClick' v-show='isShow'></backtop>\n  </div>\n</template>\n\n<script>\nimport navbar from 'components/common/navbar/NavBar'\nimport tabcontrol from 'components/common/tabControl/tabcontrol'\nimport scroll from 'components/common/BScroll/BScroll'\nimport backtop from 'components/common/backTop/backTop'\nimport homeSwiper from 'components/common/swiper/swiper'\nimport goodsView from 'components/common/goods/goodsView'\nimport recommend from 'views/home/childhome/recommend'\nimport feature from 'views/home/childhome/feature'\nimport { getHomeMultidata, getHomeGoods } from '@/network/home'\nexport default {\n  data () {\n    return {\n      isShow: false,\n      bannerList: [],\n      recommendList: [],\n      goods: {\n        'pop': { page: 0, list: [] },\n        'new': { page: 0, list: [] },\n        'sell': { page: 0, list: [] }\n      },\n      currentType: 'pop',\n      saveY: null,\n      showTab: false,\n      tabTop: 0\n    }\n  },\n  components: {\n    navbar,\n    tabcontrol,\n    scroll,\n    backtop,\n    homeSwiper,\n    recommend,\n    feature,\n    goodsView\n  },\n  computed: {\n    showGoods () {\n      return this.goods[this.currentType].list\n    }\n  },\n  created () {\n    // 1.请求多个数据\n    this.getHomeMultidata()\n\n    // 2.请求商品数据\n    this.getHomeGoods('pop')\n    this.getHomeGoods('new')\n    this.getHomeGoods('sell')\n  },\n  mounted () {\n    // 监听图片是否加载完成\n    const refresh = this.debounce(this.$refs.scroll.refresh)\n    this.$bus.$on('imgLoad', () => {\n      refresh()\n    })\n  },\n  activated () {\n    this.$refs.scroll.scrollTo(0, this.saveY, 0)\n    this.$refs.scroll.refresh()\n  },\n  deactivated () {\n    this.saveY = this.$refs.scroll.getscrollY()\n  },\n  methods: {\n    // 置顶\n    backClick () {\n      this.$refs.scroll.scrollTo(0, 0, 500)\n    },\n    backtopshow (position) {\n      // 判断backtop是否显示\n      this.isShow = -(position.y) > 200\n      // 判断是否显示顶部tab,即形成吸顶效果\n      this.showTab = -(position.y) > this.tabTop\n    },\n    getHomeMultidata () {\n      getHomeMultidata().then(res => {\n        this.bannerList = res.data.banner.list\n        this.recommendList = res.data.recommend.list\n        console.log(res)\n      })\n    },\n    getHomeGoods (type) {\n      const page = this.goods[type].page + 1\n      getHomeGoods(type, page).then(res => {\n        this.goods[type].list.push(...res.data.list)\n        this.goods[type].page += 1\n        // 完成上拉加载更多\n        this.$refs.scroll.finishPullUp()\n      })\n    },\n    tabclick (index) {\n      switch (index) {\n        case 0:\n          this.currentType = 'pop'\n          break\n        case 1:\n          this.currentType = 'new'\n          break\n        case 2:\n          this.currentType = 'sell'\n          break\n      }\n      this.$refs.tab.currentIndex = index\n      this.$refs.tab1.currentIndex = index\n      this.$refs.scroll.refresh()\n    },\n    debounce (func, delay) {\n      let timer = null\n      return function (...args) {\n        if (timer) clearTimeout(timer)\n        timer = setTimeout(() => {\n          func.apply(this, args)\n        }, delay)\n      }\n    },\n    loadMore () {\n      this.getHomeGoods(this.currentType)\n    },\n    swiperImgLoad () {\n      this.tabTop = this.$refs.tab.$el.offsetTop\n      console.log(this.$refs.tab.$el.offsetTop)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.clear {\n  clear:both;\n  margin-top: 49px;\n}\n.sc-content {\n  height: calc(100vh - 120px);\n  overflow: hidden;\n}\n</style>\n"]}]}